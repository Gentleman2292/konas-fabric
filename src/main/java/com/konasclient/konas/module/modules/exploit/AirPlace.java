package com.konasclient.konas.module.modules.exploit;

import com.konasclient.konas.event.events.player.UpdateWalkingPlayerEvent;
import com.konasclient.konas.module.Category;
import com.konasclient.konas.module.Module;
import com.konasclient.konas.setting.Setting;
import com.konasclient.konas.util.interaction.InteractionRules;
import com.konasclient.konas.util.interaction.InteractionUtil;
import meteordevelopment.orbit.EventHandler;
import net.minecraft.item.BlockItem;
import net.minecraft.util.hit.BlockHitResult;

public class AirPlace extends Module {
    private final Setting<Boolean> mouse = new Setting<>("Mouse", false);

    public AirPlace() {
        super("AirPlace", "Lets you place against the air", 0xFF35D23A, Category.Exploit);
    }

    public void onEnable() {
        InteractionRules.airPlace = true;
    }

    public void onDisable() {
        InteractionRules.airPlace = false;
    }

    @EventHandler
    public void onUpdateWalkingPlayer(UpdateWalkingPlayerEvent event) {
        if (!mouse.getValue() || mc.crosshairTarget == null || !(mc.crosshairTarget instanceof BlockHitResult) || !(mc.player.getMainHandStack().getItem() instanceof BlockItem)) return;

        if (mc.world.getBlockState(((BlockHitResult) mc.crosshairTarget).getBlockPos()).isAir() && mc.options.keyUse.isPressed()) {
            InteractionUtil.place(((BlockItem) mc.player.getMainHandStack().getItem()).getBlock(), ((BlockHitResult) mc.crosshairTarget).getBlockPos(), true);
        }
    }
}
